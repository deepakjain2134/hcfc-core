function markallcompliantmsg(){swal({title:"Message",text:"Please make all the status compliant!",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!0})}function swalalertLogin(n,t,i){n||(n="Message");swal({title:n,text:t,type:i,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Login",closeOnConfirm:!1,closeOnCancel:!0},function(n){n&&(window.location.href=CRxUrls.Account_Login)})}function redirecttoWOassets(n,t){swal({html:!0,title:"Message",text:"<label>First close the Work order<\/label><br />",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"GO TO WORK ORDERS",cancelButtonText:"CANCEL",closeOnConfirm:!1,closeOnCancel:!0},function(i){window.location.href=i?n:t})}function redirecttodefeciencies(n){swal({html:!0,title:"Message",text:"<label>There are still pending deficiencies since last inspection.<\/label><br /><label> Please fix it before proceeding with new inspection<\/label>",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"GO TO DEFICIENCIES",cancelButtonText:"CANCEL",closeOnConfirm:!1,closeOnCancel:!0},function(t){t?window.location.href=n:swal.close()})}function redirectosetupassets(n,t){swal({title:"Attach assets",text:"There is no asset for inspection!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"setup",cancelButtonText:"cancel",closeOnConfirm:!0,closeOnCancel:!0},function(i){window.location.href=i?n:t})}function RedirectScheduler(n){swal({html:!0,title:"Message",text:"<label>There are no schedules please create schedules first!!<\/label>",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"GO TO SCHEDULES",cancelButtonText:"CANCEL",closeOnConfirm:!1,closeOnCancel:!0},function(t){t?window.location.href=n:(history.back(),$("#submitButton").addClass("disable"),$("#resumeButton").addClass("disable"),$("#btnSubmit").addClass("disable"))})}function InsUploadfile(n,t,i){var o=$(n),u=[],r;i==="D"&&(u=["pdf","xlsx","xls","doc","docx","csv"]);i==="C"&&(u=["png","jpg","jpeg"]);i==="F"&&(u=["dwg","svg","png","jpg","jpeg","pdf"]);var s=n.getAttribute("tempName"),h=n.getAttribute("filename"),c=n.getAttribute("filepath");if(n.files.length>0){var n=n.files[0],f=n.name,e=f.substring(f.lastIndexOf(".")+1);if($.inArray(e.toLowerCase(),u)==-1)return $(o).val(""),swal("Only formats are allowed : "+u.join(", ")),!1;r=new FileReader;r.readAsDataURL(n);r.onload=function(){var n=r.result.split(",");$("input[name='"+s+"'][type=hidden]").val(n[1]);$("input[name='"+h+"'][type=hidden]").val(f);$("input[name='"+c+"'][type=hidden]").val("")};r.onloadend=function(){i=="C"?$("#imagePreview_"+t).attr("src",this.result):i=="F"?e=="pdf"?$("#imagePreview_"+t).attr("src","../dist/Images/Icons/pdf_icon.png"):$("#imagePreview_"+t).attr("src",this.result):$("#imagePreview_"+t).attr("src","/dist/Images/Icons/document_blue-icon.png");$("#imagePreview_"+t).removeClass("img_prev");$("#imagePreview_"+t).addClass("img_prev_upload")};r.onerror=function(){$("#FileContent").val("")};$(".part1").hide();$(".part2").show()}}function InsUploadAndSavefile(n,t,i){var o=$(n),r=[],n,u,e,f;if(t==="D"&&(r=["pdf","xlsx","xls","doc","docx","csv"]),t==="C"&&(r=["png","jpg","jpeg"]),n.files.length>0){n=n.files[0];const s=n.size,h=Math.round(s/1024);if(h>=5120)return AlertWarningMsg("File too Big, please select a file less than 5mb"),!1;if(u=n.name,e=u.substring(u.lastIndexOf(".")+1),$.inArray(e.toLowerCase(),r)==-1)return $(o).val(""),AlertWarningMsg("Only "+r.join(", ")+" formats are allowed."),!1;f=new FileReader;f.readAsDataURL(n);f.onload=function(){var f=$("#InspectionId").val(),e=$("#TinspectionActivity_0__ActivityId").val(),r=new FormData;r.append(u,n);r.append("StepsId",i);r.append("FileType",t);r.append("ActivityId",e);$.ajax({url:"/Goal/AddInspectionFiles?inspectionId="+f,method:"POST",data:r,contentType:!1,dataType:"html",processData:!1,success:function(n){if(successAlert("File uploaded successfully."),$("input[type='file']").val(""),i>0){$("#demofiles_"+i).children("ul").append(n);var t=$("#demofiles_"+i+" ul li").length;t>=3&&$("#divfiles_"+i).addClass("disable")}else loadilsmdetailpartial()}})};f.onerror=function(){$("#FileContent").val("")}}}function ImageUpload(n){var r=n.getAttribute("tempName"),u=n.getAttribute("filecontent"),i,t;n.files.length>0&&(n=n.files[0],i=n.name,t=new FileReader,t.readAsDataURL(n),t.onload=function(){var n=t.result.split(",");$("input[name='"+r+"'][type=hidden]").val(i);$("input[name='"+u+"'][type=hidden]").val(n[1]);$("input[name='FilePath'][type=hidden]").val(null);$('input[name="FilePath"').attr("data-dirty-initial-value","")},t.onerror=function(n){console.log("Error: ",n);$("#FileContent").val("")})}function ConfirmPopUp(n,t,i,r,u,f,e=false,o=false){swal({title:n,text:t,type:i,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:r,cancelButtonText:"Cancel",closeOnConfirm:e,closeOnCancel:o},function(n){n?e||(window.location.href=u):f==="-1"?window.history.back():window.location.href=f})}function SwalConfirmPopUp(n,t,i,r,u,f,e){var s=!1,o;u&&(s=!0);o=!0;e&&(o=!1);swal({html:!0,title:n,text:t,type:i,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:r,cancelButtonText:f,closeOnConfirm:s,closeOnCancel:o},function(n){n?u!=""?window.location.href=u:swal.close():e&&(window.location.href=e)})}function ShowConfirmMsg(n,t,i,r,u){swal({html:!0,title:n,text:i,type:t,showCancelButton:!1,confirmButtonColor:"#DD6B55",confirmButtonText:r,closeOnConfirm:!1,closeOnCancel:!0},function(n){n&&(window.location.href=u)})}function AlertSuccessMsg(n,t){t||(t="Message");swal({title:t,text:n,type:"success",confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!0,timer:3e3})}function AlertWarningMsg(n,t){t||(t="Message");swal({title:t,text:n,type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!0,timer:3e3})}function AlertInfoMsg(n,t){t||(t="Message");swal({title:t,text:n,type:"info",confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!0,timer:3e3})}function swalalert(n,t,i){n||(n="Message");swal({title:n,text:t,type:i,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!0,timer:3e3})}function showInforMsg(n,t,i,r){swal({html:!0,title:n,text:t,type:"info",showCancelButton:!1,confirmButtonColor:"#DD6B55",confirmButtonText:i,closeOnConfirm:!0,closeOnCancel:!0},function(n){window.location.href=n?r:r})}(function(n){"use strict";function i(t,i){this.isInit=!0;this.itemsArray=[];this.$element=n(t);this.$element.hide();this.isSelect=t.tagName==="SELECT";this.multiple=this.isSelect&&t.hasAttribute("multiple");this.objectItems=i&&i.itemValue;this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"";this.inputSize=Math.max(1,this.placeholderText.length);this.$container=n('<div class="bootstrap-tagsinput"><\/div>');this.$input=n('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container);this.$element.before(this.$container);this.build(i);this.isInit=!1}function u(n,t){if(typeof n[t]!="function"){var i=n[t];n[t]=function(n){return n[i]}}}function f(n,t){if(typeof n[t]!="function"){var i=n[t];n[t]=function(){return i}}}function t(n){return n?e.text(n).html():""}function o(n){var t=0,i;return document.selection?(n.focus(),i=document.selection.createRange(),i.moveStart("character",-n.value.length),t=i.text.length):(n.selectionStart||n.selectionStart=="0")&&(t=n.selectionStart),t}function s(t,i){var r=!1;return n.each(i,function(n,i){if(typeof i=="number"&&t.which===i)return r=!0,!1;if(t.which===i.which){var u=!i.hasOwnProperty("altKey")||t.altKey===i.altKey,f=!i.hasOwnProperty("shiftKey")||t.shiftKey===i.shiftKey,e=!i.hasOwnProperty("ctrlKey")||t.ctrlKey===i.ctrlKey;if(u&&f&&e)return r=!0,!1}}),r}var r={tagClass:function(){return"label label-info"},focusClass:"focus",itemValue:function(n){return n?n.toString():n},itemText:function(n){return this.itemValue(n)},itemTitle:function(){return null},freeInput:!0,addOnBlur:!0,maxTags:undefined,maxChars:undefined,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(n,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1,triggerChange:!0},e;i.prototype={constructor:i,add:function(i,r,u){var f=this,a,e,o,w,l,h,b,c;if((!f.options.maxTags||!(f.itemsArray.length>=f.options.maxTags))&&(i===!1||i)){if(typeof i=="string"&&f.options.trimValue&&(i=n.trim(i)),typeof i=="object"&&!f.objectItems)throw"Can't add objects when itemValue option is not set";if(!i.toString().match(/^\s*$/)){if(f.isSelect&&!f.multiple&&f.itemsArray.length>0&&f.remove(f.itemsArray[0]),typeof i=="string"&&this.$element[0].tagName==="INPUT"&&(a=f.options.delimiterRegex?f.options.delimiterRegex:f.options.delimiter,e=i.split(a),e.length>1)){for(o=0;o<e.length;o++)this.add(e[o],!0);r||f.pushVal(f.options.triggerChange);return}var s=f.options.itemValue(i),v=f.options.itemText(i),k=f.options.tagClass(i),y=f.options.itemTitle(i),p=n.grep(f.itemsArray,function(n){return f.options.itemValue(n)===s})[0];if(p&&!f.options.allowDuplicates){if(f.options.onTagExists){w=n(".tag",f.$container).filter(function(){return n(this).data("item")===p});f.options.onTagExists(i,w)}return}f.items().toString().length+i.length+1>f.options.maxInputLength||(l=n.Event("beforeItemAdd",{item:i,cancel:!1,options:u}),f.$element.trigger(l),l.cancel)||(f.itemsArray.push(i),h=n('<span class="tag '+t(k)+(y!==null?'" title="'+y:"")+'">'+t(v)+'<span data-role="remove"><\/span><\/span>'),h.data("item",i),f.findInputWrapper().before(h),h.after(" "),b=n('option[value="'+encodeURIComponent(s)+'"]',f.$element).length||n('option[value="'+t(s)+'"]',f.$element).length,f.isSelect&&!b&&(c=n("<option selected>"+t(v)+"<\/option>"),c.data("item",i),c.attr("value",s),f.$element.append(c)),r||f.pushVal(f.options.triggerChange),(f.options.maxTags===f.itemsArray.length||f.items().toString().length===f.options.maxInputLength)&&f.$container.addClass("bootstrap-tagsinput-max"),n(".typeahead, .twitter-typeahead",f.$container).length&&f.$input.typeahead("val",""),this.isInit?f.$element.trigger(n.Event("itemAddedOnInit",{item:i,options:u})):f.$element.trigger(n.Event("itemAdded",{item:i,options:u})))}}},remove:function(t,i,r){var u=this,f;if(u.objectItems&&(t=typeof t=="object"?n.grep(u.itemsArray,function(n){return u.options.itemValue(n)==u.options.itemValue(t)}):n.grep(u.itemsArray,function(n){return u.options.itemValue(n)==t}),t=t[t.length-1]),t){if(f=n.Event("beforeItemRemove",{item:t,cancel:!1,options:r}),u.$element.trigger(f),f.cancel)return;n(".tag",u.$container).filter(function(){return n(this).data("item")===t}).remove();n("option",u.$element).filter(function(){return n(this).data("item")===t}).remove();n.inArray(t,u.itemsArray)!==-1&&u.itemsArray.splice(n.inArray(t,u.itemsArray),1)}i||u.pushVal(u.options.triggerChange);u.options.maxTags>u.itemsArray.length&&u.$container.removeClass("bootstrap-tagsinput-max");u.$element.trigger(n.Event("itemRemoved",{item:t,options:r}))},removeAll:function(){var t=this;for(n(".tag",t.$container).remove(),n("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal(t.options.triggerChange)},refresh:function(){var i=this;n(".tag",i.$container).each(function(){var r=n(this),u=r.data("item"),e=i.options.itemValue(u),o=i.options.itemText(u),s=i.options.tagClass(u),f;r.attr("class",null);r.addClass("tag "+t(s));r.contents().filter(function(){return this.nodeType==3})[0].nodeValue=t(o);i.isSelect&&(f=n("option",i.$element).filter(function(){return n(this).data("item")===u}),f.attr("value",e))})},items:function(){return this.itemsArray},pushVal:function(){var t=this,i=n.map(t.items(),function(n){return t.options.itemValue(n).toString()});t.$element.val(i,!0);t.options.triggerChange&&t.$element.trigger("change")},build:function(t){var i=this,h;if(i.options=n.extend({},r,t),i.objectItems&&(i.options.freeInput=!1),u(i.options,"itemValue"),u(i.options,"itemText"),f(i.options,"tagClass"),i.options.typeahead&&(h=i.options.typeahead||{},f(h,"source"),i.$input.typeahead(n.extend({},h,{source:function(t,r){function f(n){for(var u,f=[],t=0;t<n.length;t++)u=i.options.itemText(n[t]),e[u]=n[t],f.push(u);r(f)}this.map={};var e=this.map,u=h.source(t);n.isFunction(u.success)?u.success(f):n.isFunction(u.then)?u.then(f):n.when(u).then(f)},updater:function(n){return i.add(this.map[n]),this.map[n]},matcher:function(n){return n.toLowerCase().indexOf(this.query.trim().toLowerCase())!==-1},sorter:function(n){return n.sort()},highlighter:function(n){var t=new RegExp("("+this.query+")","gi");return n.replace(t,"<strong>$1<\/strong>")}}))),i.options.typeaheadjs){var l=null,e={},c=i.options.typeaheadjs;n.isArray(c)?(l=c[0],e=c[1]):e=c;i.$input.typeahead(l,e).on("typeahead:selected",n.proxy(function(n,t){e.valueKey?i.add(t[e.valueKey]):i.add(t);i.$input.typeahead("val","")},i))}i.$container.on("click",n.proxy(function(){i.$element.attr("disabled")||i.$input.removeAttr("disabled");i.$input.focus()},i));if(i.options.addOnBlur&&i.options.freeInput)i.$input.on("focusout",n.proxy(function(){n(".typeahead, .twitter-typeahead",i.$container).length===0&&(i.add(i.$input.val()),i.$input.val(""))},i));i.$container.on({focusin:function(){i.$container.addClass(i.options.focusClass)},focusout:function(){i.$container.removeClass(i.options.focusClass)}});i.$container.on("keydown","input",n.proxy(function(t){var r=n(t.target),u=i.findInputWrapper(),f,e,s,h;if(i.$element.attr("disabled")){i.$input.attr("disabled","disabled");return}switch(t.which){case 8:o(r[0])===0&&(f=u.prev(),f.length&&i.remove(f.data("item")));break;case 46:o(r[0])===0&&(e=u.next(),e.length&&i.remove(e.data("item")));break;case 37:s=u.prev();r.val().length===0&&s[0]&&(s.before(u),r.focus());break;case 39:h=u.next();r.val().length===0&&h[0]&&(h.after(u),r.focus())}var c=r.val().length,l=Math.ceil(c/5),a=c+l+1;r.attr("size",Math.max(this.inputSize,r.val().length))},i));i.$container.on("keypress","input",n.proxy(function(t){var r=n(t.target),u,f;if(i.$element.attr("disabled")){i.$input.attr("disabled","disabled");return}u=r.val();f=i.options.maxChars&&u.length>=i.options.maxChars;i.options.freeInput&&(s(t,i.options.confirmKeys)||f)&&(u.length!==0&&(i.add(f?u.substr(0,i.options.maxChars):u),r.val("")),i.options.cancelConfirmKeysOnEmpty===!1&&t.preventDefault());var e=r.val().length,o=Math.ceil(e/5),h=e+o+1;r.attr("size",Math.max(this.inputSize,r.val().length))},i));i.$container.on("click","[data-role=remove]",n.proxy(function(t){i.$element.attr("disabled")||i.remove(n(t.target).closest(".tag").data("item"))},i));i.options.itemValue===r.itemValue&&(i.$element[0].tagName==="INPUT"?i.add(i.$element.val()):n("option",i.$element).each(function(){i.add(n(this).attr("value"),!0)}))},destroy:function(){var n=this;n.$container.off("keypress","input");n.$container.off("click","[role=remove]");n.$container.remove();n.$element.removeData("tagsinput");n.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],i=this.$container[0];t&&t.parentNode!==i;)t=t.parentNode;return n(t)}};n.fn.tagsinput=function(t,r,u){var f=[];return this.each(function(){var e=n(this).data("tagsinput"),o;e?t||r?e[t]!==undefined&&(o=e[t].length===3&&u!==undefined?e[t](r,null,u):e[t](r),o!==undefined&&f.push(o)):f.push(e):(e=new i(this,t),n(this).data("tagsinput",e),f.push(e),this.tagName==="SELECT"&&n("option",n(this)).attr("selected","selected"),n(this).val(n(this).val()))}),typeof t=="string"?f.length>1?f:f[0]:f};n.fn.tagsinput.Constructor=i;e=n("<div />");n(function(){n("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})})(window.jQuery),function(n){n.fn.listnav=function(t){var i=n.extend({},n.fn.listnav.defaults,t),r=["_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","-"],u=!1,f=document.ontouchstart!==null?"click":"touchend";return i.prefixes=n.map(i.prefixes,function(n){return n.toLowerCase()}),this.each(function(){function g(){var s,e;if(o.append(ft()),t=n(".ln-letters",o).slice(0,1),i.showCounts&&(h=n(".ln-letter-count",o).slice(0,1)),tt(),rt(),ut(),i.flagDisabled&&it(),i.includeAll||n(".all",t).remove(),i.includeNums||n("._",t).remove(),i.includeOther||n(".-",t).remove(),i.removeDisabled&&n(".ln-disabled",t).remove(),n(":last",t).addClass("ln-last"),n.cookie&&i.cookieName!==null&&(s=n.cookie(i.cookieName),s!==null&&typeof s!="undefined"&&(i.initLetter=s)),i.initLetter!=="")u=!0,n("."+i.initLetter.toLowerCase(),t).slice(0,1).trigger(f);else if(i.includeAll)n(".all",t).addClass("ln-selected");else for(e=i.includeNums?0:1;e<r.length;e++)if(c[r[e]]>0){u=!0;n("."+r[e],t).slice(0,1).trigger(f);break}}function nt(){var t=h.outerHeight();h.css({top:n("a:first",o).slice(0,1).position().top-t})}function tt(){var t,r,u="",f=i.prefixes.length>0,o=i.filterSelector.length>0;n(e).children().each(function(){var h,e,s;if(r=n(this),t=o?n.trim(r.find(i.filterSelector).text()).toLowerCase():n.trim(r.text()).toLowerCase(),t!==""){if(f&&(h=n.map(i.prefixes,function(n){return n.indexOf(" ")<=0?n+" ":n}),e=n.grep(h,function(n){return t.indexOf(n)===0}),e.length>0)){s=t.toLowerCase().split(e[0])[1];u=s!=null?n.trim(s).charAt(0):t.charAt(0);k(u,r,!0);return}u=t.charAt(0);k(u,r)}})}function k(n,t,i){/\W/.test(n)&&(n="-");isNaN(n)||(n="_");t.addClass("ln-"+n);c[n]===undefined&&(c[n]=0);c[n]++;i||v++}function it(){for(var i=0;i<r.length;i++)c[r[i]]===undefined&&n("."+r[i],t).addClass("ln-disabled")}function rt(){e.append('<li class="ln-no-match listNavHide">'+i.noMatchText+"<\/li>")}function d(t){return n(t).hasClass("all")?y=i.dontCount?v-e.find(i.dontCount).length:v:(t=".ln-"+n(t).attr("class").split(" ")[0],s=i.dontCount?e.find(t).not(i.dontCount).length:e.find(t).length,s!==undefined?s:0)}function ut(){i.showCounts&&(o.mouseover(function(){nt()}),n(".ln-letters a",o).mouseover(function(){w=n(this).position().left;b=n(this).outerWidth()+"px";s=d(this);h.css({left:w,width:b}).text(s).addClass("letterCountShow").removeClass("listNavHide")}).mouseout(function(){h.addClass("listNavHide").removeClass("letterCountShow")}));n("a",t).bind(f,function(r){var h;r.preventDefault();var o=n(this),f=o.attr("class").split(" ")[0],s=e.children(".ln-no-match");if(l!==f)if(n("a.ln-selected",t).removeClass("ln-selected"),f==="all"?(e.children().addClass("listNavShow").removeClass("listNavHide"),s.addClass("listNavHide").removeClass("listNavShow"),p=!0):(p?(e.children().addClass("listNavHide").removeClass("listNavShow"),p=!1):l!==""&&e.children(".ln-"+l).addClass("listNavHide").removeClass("listNavShow"),h=d(this),h>0?(e.children(".ln-"+f).addClass("listNavShow").removeClass("listNavHide"),s.addClass("listNavHide").removeClass("listNavShow")):s.addClass("listNavShow").removeClass("listNavHide")),l=f,n.cookie&&i.cookieName!==null&&n.cookie(i.cookieName,f,{expires:999}),o.addClass("ln-selected"),o.blur(),u||i.onClick===null)u=!1;else i.onClick(f)})}function ft(){for(var t=[],n=1;n<r.length;n++)t.length===0&&t.push('<a class="all" href="#">'+i.allText+'<\/a><a class="_" href="#">0-9<\/a>'),t.push('<a class="'+r[n]+'" href="#">'+(r[n]==="-"?"...":r[n].toUpperCase())+"<\/a>");return'<div class="ln-letters">'+t.join("")+"<\/div>"+(i.showCounts?'<div class="ln-letter-count listNavHide">0<\/div>':"")}var o,t,h,w,b,s,a=this.id,e=n(this),c={},v=0,y=0,p=!0,l="";n("#"+a+"-nav").length||n('<div id="'+a+'-nav" class="listNav"/>').insertBefore(e);o=n("#"+a+"-nav");g()})};n.fn.listnav.defaults={initLetter:"",includeAll:!0,allText:"All",includeOther:!1,includeNums:!0,flagDisabled:!0,removeDisabled:!1,noMatchText:"No matching entries",showCounts:!0,dontCount:"",cookieName:null,onClick:null,prefixes:[],filterSelector:""}}(jQuery);
/*!
 * ClockPicker v0.0.7 (http://weareoutman.github.io/clockpicker/)
 * Copyright 2014 Wang Shenwei.
 * Licensed under MIT (https://github.com/weareoutman/clockpicker/blob/gh-pages/LICENSE)
 */
(function(){function o(n){return document.createElementNS(k,n)}function s(n){return(n<10?"0":"")+n}function it(n){var t=++tt+"";return n?n+t:t}function t(t,v){function vt(n,t){var b=st.offset(),k=/^touch/.test(n.type),s=b.left+i,c=b.top+i,f=(k?n.originalEvent.touches[0]:n).pageX-s,o=(k?n.originalEvent.touches[0]:n).pageY-c,d=Math.sqrt(f*f+o*o),l=!1,g;if(!t||!(d<r-u||d>r+u)){n.preventDefault();g=setTimeout(function(){a.addClass("clockpicker-moving")},200);h&&st.append(nt.canvas);nt.setHand(f,o,!t,!0);e.off(y).on(y,function(n){n.preventDefault();var t=/^touch/.test(n.type),i=(t?n.originalEvent.touches[0]:n).pageX-s,r=(t?n.originalEvent.touches[0]:n).pageY-c;(l||i!==f||r!==o)&&(l=!0,nt.setHand(i,r,!1,!0))});e.off(p).on(p,function(n){e.off(p);n.preventDefault();var i=/^touch/.test(n.type),r=(i?n.originalEvent.changedTouches[0]:n).pageX-s,u=(i?n.originalEvent.changedTouches[0]:n).pageY-c;(t||l)&&r===f&&u===o&&nt.setHand(r,u);nt.currentView==="hours"?nt.toggleView("minutes",w/2):v.autoclose&&(nt.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){nt.done()},w/2));st.prepend(yt);clearTimeout(g);a.removeClass("clockpicker-moving");e.off(y)})}}var d=n(rt),st=d.find(".clockpicker-plate"),pt=d.find(".clockpicker-hours"),bt=d.find(".clockpicker-minutes"),ti=d.find(".clockpicker-am-pm-block"),kt=t.prop("tagName")==="INPUT",dt=kt?t:t.find("input"),gt=t.find(".input-group-addon"),nt=this,ni,ii,at,b,k,tt,et,wt,yt,ot,ut,ft,ht,ct,lt;this.id=it("cp");this.element=t;this.options=v;this.isAppended=!1;this.isShown=!1;this.currentView="hours";this.isInput=kt;this.input=dt;this.addon=gt;this.popover=d;this.plate=st;this.hoursView=pt;this.minutesView=bt;this.amPmBlock=ti;this.spanHours=d.find(".clockpicker-span-hours");this.spanMinutes=d.find(".clockpicker-span-minutes");this.spanAmPm=d.find(".clockpicker-span-am-pm");this.amOrPm="PM";v.twelvehour&&(ni='<div class="clockpicker-am-pm-block"><button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">AM<\/button><button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">PM<\/button><\/div>',ii=n(ni),n('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM<\/button>').on("click",function(){nt.amOrPm="AM";n(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),n('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM<\/button>').on("click",function(){nt.amOrPm="PM";n(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock));v.autoclose||n('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+v.donetext+"<\/button>").click(n.proxy(this.done,this)).appendTo(d);(v.placement==="top"||v.placement==="bottom")&&(v.align==="top"||v.align==="bottom")&&(v.align="left");(v.placement==="left"||v.placement==="right")&&(v.align==="left"||v.align==="right")&&(v.align="top");d.addClass(v.placement);d.addClass("clockpicker-align-"+v.align);this.spanHours.click(n.proxy(this.toggleView,this,"hours"));this.spanMinutes.click(n.proxy(this.toggleView,this,"minutes"));dt.on("focus.clockpicker click.clockpicker",n.proxy(this.show,this));gt.on("click.clockpicker",n.proxy(this.toggle,this));if(at=n('<div class="clockpicker-tick"><\/div>'),v.twelvehour)for(b=1;b<13;b+=1){k=at.clone();tt=b/6*Math.PI;et=r;k.css("font-size","120%");k.css({left:i+Math.sin(tt)*et-u,top:i-Math.cos(tt)*et-u});k.html(b===0?"00":b);pt.append(k);k.on(c,vt)}else for(b=0;b<24;b+=1){k=at.clone();tt=b/6*Math.PI;wt=b>0&&b<13;et=wt?l:r;k.css({left:i+Math.sin(tt)*et-u,top:i-Math.cos(tt)*et-u});wt&&k.css("font-size","120%");k.html(b===0?"00":b);pt.append(k);k.on(c,vt)}for(b=0;b<60;b+=5){k=at.clone();tt=b/30*Math.PI;k.css({left:i+Math.sin(tt)*r-u,top:i-Math.cos(tt)*r-u});k.css("font-size","120%");k.html(s(b));bt.append(k);k.on(c,vt)}st.on(c,function(t){n(t.target).closest(".clockpicker-tick").length===0&&vt(t,!0)});h&&(yt=d.find(".clockpicker-canvas"),ot=o("svg"),ot.setAttribute("class","clockpicker-svg"),ot.setAttribute("width",g),ot.setAttribute("height",g),ut=o("g"),ut.setAttribute("transform","translate("+i+","+i+")"),ft=o("circle"),ft.setAttribute("class","clockpicker-canvas-bearing"),ft.setAttribute("cx",0),ft.setAttribute("cy",0),ft.setAttribute("r",2),ht=o("line"),ht.setAttribute("x1",0),ht.setAttribute("y1",0),ct=o("circle"),ct.setAttribute("class","clockpicker-canvas-bg"),ct.setAttribute("r",u),lt=o("circle"),lt.setAttribute("class","clockpicker-canvas-fg"),lt.setAttribute("r",3.5),ut.appendChild(ht),ut.appendChild(ct),ut.appendChild(lt),ut.appendChild(ft),ot.appendChild(ut),yt.append(ot),this.hand=ht,this.bg=ct,this.fg=lt,this.bearing=ft,this.g=ut,this.canvas=yt);f(this.options.init)}function f(n){n&&typeof n=="function"&&n()}var n=window.jQuery,b=n(window),e=n(document),a,k="http://www.w3.org/2000/svg",h="SVGAngle"in window&&function(){var t,n=document.createElement("div");return n.innerHTML="<svg/>",t=(n.firstChild&&n.firstChild.namespaceURI)==k,n.innerHTML="",t}(),nt=function(){var n=document.createElement("div").style;return"transition"in n||"WebkitTransition"in n||"MozTransition"in n||"msTransition"in n||"OTransition"in n}(),v="ontouchstart"in window,c="mousedown"+(v?" touchstart":""),y="mousemove.clockpicker"+(v?" touchmove.clockpicker":""),p="mouseup.clockpicker"+(v?" touchend.clockpicker":""),d=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,tt=0,i=100,r=80,l=54,u=13,g=i*2,w=nt?350:1,rt='<div class="popover clockpicker-popover"><div class="arrow"><\/div><div class="popover-title"><span class="clockpicker-span-hours text-primary"><\/span> : <span class="clockpicker-span-minutes"><\/span> <span class="clockpicker-span-am-pm"><\/span><\/div><div class="popover-content"><div class="clockpicker-plate"><div class="clockpicker-canvas"><\/div><div class="clockpicker-dial clockpicker-hours"><\/div><div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"><\/div><\/div><span class="clockpicker-am-pm-block"><\/span><\/div><\/div>';t.DEFAULTS={"default":"",fromnow:0,placement:"bottom",align:"left",donetext:"完成",autoclose:!1,twelvehour:!1,vibrate:!0};t.prototype.toggle=function(){this[this.isShown?"hide":"show"]()};t.prototype.locate=function(){var r=this.element,i=this.popover,t=r.offset(),u=r.outerWidth(),f=r.outerHeight(),e=this.options.placement,o=this.options.align,n={},s=this;i.show();switch(e){case"bottom":n.top=t.top+f;break;case"right":n.left=t.left+u;break;case"top":n.top=t.top-i.outerHeight();break;case"left":n.left=t.left-i.outerWidth()}switch(o){case"left":n.left=t.left;break;case"right":n.left=t.left+u-i.outerWidth();break;case"top":n.top=t.top;break;case"bottom":n.top=t.top+f-i.outerHeight()}i.css(n)};t.prototype.show=function(){var t,i,r;if(!this.isShown){if(f(this.options.beforeShow),t=this,!this.isAppended){a=n(document.body).append(this.popover);b.on("resize.clockpicker"+this.id,function(){t.isShown&&t.locate()});this.isAppended=!0}i=((this.input.prop("value")||this.options["default"]||"")+"").split(":");i[0]==="now"&&(r=new Date(+new Date+this.options.fromnow),i=[r.getHours(),r.getMinutes()]);this.hours=+i[0]||0;this.minutes=+i[1]||0;this.spanHours.html(s(this.hours));this.spanMinutes.html(s(this.minutes));this.toggleView("hours");this.locate();this.isShown=!0;e.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(i){var r=n(i.target);r.closest(t.popover).length===0&&r.closest(t.addon).length===0&&r.closest(t.input).length===0&&t.hide()});e.on("keyup.clockpicker."+this.id,function(n){n.keyCode===27&&t.hide()});f(this.options.afterShow)}};t.prototype.hide=function(){f(this.options.beforeHide);this.isShown=!1;e.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id);e.off("keyup.clockpicker."+this.id);this.popover.hide();f(this.options.afterHide)};t.prototype.toggleView=function(t,i){var u=!1;t==="minutes"&&n(this.hoursView).css("visibility")==="visible"&&(f(this.options.beforeHourSelect),u=!0);var r=t==="hours",o=r?this.hoursView:this.minutesView,e=r?this.minutesView:this.hoursView;this.currentView=t;this.spanHours.toggleClass("text-primary",r);this.spanMinutes.toggleClass("text-primary",!r);e.addClass("clockpicker-dial-out");o.css("visibility","visible").removeClass("clockpicker-dial-out");this.resetClock(i);clearTimeout(this.toggleViewTimer);this.toggleViewTimer=setTimeout(function(){e.css("visibility","hidden")},w);u&&f(this.options.afterHourSelect)};t.prototype.resetClock=function(n){var u=this.currentView,t=this[u],f=u==="hours",a=Math.PI/(f?6:30),e=t*a,o=f&&t>0&&t<13?l:r,s=Math.sin(e)*o,c=-Math.cos(e)*o,i=this;h&&n?(i.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){i.canvas.removeClass("clockpicker-canvas-out");i.setHand(s,c)},n)):this.setHand(s,c)};t.prototype.setHand=function(t,i,u,f){var o=Math.atan2(t,-i),c=this.currentView==="hours",p=Math.PI/(c||u?6:30),k=Math.sqrt(t*t+i*i),w=this.options,b=c&&k<(r+l)/2,y=b?l:r,e,a,v;if(w.twelvehour&&(y=r),o<0&&(o=Math.PI*2+o),e=Math.round(o/p),o=e*p,w.twelvehour?c?e===0&&(e=12):(u&&(e*=5),e===60&&(e=0)):c?(e===12&&(e=0),e=b?e===0?12:e:e===0?0:e+12):(u&&(e*=5),e===60&&(e=0)),this[this.currentView]!==e&&d&&this.options.vibrate&&(this.vibrateTimer||(navigator[d](10),this.vibrateTimer=setTimeout(n.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=e,this[c?"spanHours":"spanMinutes"].html(s(e)),!h){this[c?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=n(this);t.toggleClass("active",e===+t.html())});return}f||!c&&e%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));a=Math.sin(o)*y;v=-Math.cos(o)*y;this.hand.setAttribute("x2",a);this.hand.setAttribute("y2",v);this.bg.setAttribute("cx",a);this.bg.setAttribute("cy",v);this.fg.setAttribute("cx",a);this.fg.setAttribute("cy",v)};t.prototype.done=function(){f(this.options.beforeDone);this.hide();var t=this.input.prop("value"),n=s(this.hours)+":"+s(this.minutes)+" ";this.options.twelvehour&&(n=n+this.amOrPm);this.input.prop("value",n);n!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change"));this.options.autoclose&&this.input.trigger("blur");f(this.options.afterDone)};t.prototype.remove=function(){this.element.removeData("clockpicker");this.input.off("focus.clockpicker click.clockpicker");this.addon.off("click.clockpicker");this.isShown&&this.hide();this.isAppended&&(b.off("resize.clockpicker"+this.id),this.popover.remove())};n.fn.clockpicker=function(i){var r=Array.prototype.slice.call(arguments,1);return this.each(function(){var u=n(this),f=u.data("clockpicker"),e;f?typeof f[i]=="function"&&f[i].apply(f,r):(e=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i),u.data("clockpicker",new t(u,e)))})}})();
/*!
 * Bootstrap Context Menu
 * Author: @sydcanem
 * https://github.com/sydcanem/bootstrap-contextmenu
 *
 * Inspired by Bootstrap's dropdown plugin.
 * Bootstrap (http://getbootstrap.com).
 *
 * Licensed under MIT
 * ========================================================= */
(function(n){"use strict";var i='[data-toggle="context"]',t=function(t,i){this.$element=n(t);this.before=i.before||this.before;this.onItem=i.onItem||this.onItem;this.scopes=i.scopes||null;i.target&&this.$element.data("target",i.target);this.listen()};t.prototype={constructor:t,show:function(t){var i,e,r,u,f={relatedTarget:this,target:t.currentTarget};if(!this.isDisabled()&&(this.closemenu(),this.before.call(this,t,n(t.currentTarget))!==!1)){i=this.getMenu();i.trigger(e=n.Event("show.bs.context",f));r=this.getPosition(t,i);u="li:not(.divider)";i.attr("style","").css(r).addClass("open").on("click.context.data-api",u,n.proxy(this.onItem,this,n(t.currentTarget))).trigger("shown.bs.context",f);n("html").on("click.context.data-api",i.selector,n.proxy(this.closemenu,this));return!1}},closemenu:function(t){var i,f,u,r;(i=this.getMenu(),i.hasClass("open"))&&(r={relatedTarget:this},i.trigger(f=n.Event("hide.bs.context",r)),u="li:not(.divider)",i.removeClass("open").off("click.context.data-api",u).trigger("hidden.bs.context",r),n("html").off("click.context.data-api",i.selector),t&&t.stopPropagation())},keydown:function(n){n.which==27&&this.closemenu(n)},before:function(){return!0},onItem:function(){return!0},listen:function(){this.$element.on("contextmenu.context.data-api",this.scopes,n.proxy(this.show,this));n("html").on("click.context.data-api",n.proxy(this.closemenu,this));n("html").on("keydown.context.data-api",n.proxy(this.keydown,this))},destroy:function(){this.$element.off(".context.data-api").removeData("context");n("html").off(".context.data-api")},isDisabled:function(){return this.$element.hasClass("disabled")||this.$element.attr("disabled")},getMenu:function(){var t=this.$element.data("target"),i;return t||(t=this.$element.attr("href"),t=t&&t.replace(/.*(?=#[^\s]*$)/,"")),i=n(t),i&&i.length?i:this.$element.find(t)},getPosition:function(t,i){var r=t.clientX,e=t.clientY,c=n(window).width(),l=n(window).height(),o=i.find(".dropdown-menu").outerWidth(),h=i.find(".dropdown-menu").outerHeight(),u,f,s;return u=e+h>l?{top:e-h+n(window).scrollTop()}:{top:e+n(window).scrollTop()},f=r+o>c&&r-o>0?{left:r-o+n(window).scrollLeft()}:{left:r+n(window).scrollLeft()},s=i.offsetParent().offset(),f.left=f.left-s.left,u.top=u.top-s.top,n.extend({position:"absolute","z-index":9999},u,f)}};n.fn.contextmenu=function(i,r){return this.each(function(){var f=n(this),u=f.data("context"),e=typeof i=="object"&&i;u||f.data("context",u=new t(f,e));typeof i=="string"&&u[i].call(u,r)})};n.fn.contextmenu.Constructor=t;n(document).on("contextmenu.context.data-api",function(){n(i).each(function(){var t=n(this).data("context");t&&t.closemenu()})}).on("contextmenu.context.data-api",i,function(t){n(this).contextmenu("show",t);t.preventDefault();t.stopPropagation()})})(jQuery);