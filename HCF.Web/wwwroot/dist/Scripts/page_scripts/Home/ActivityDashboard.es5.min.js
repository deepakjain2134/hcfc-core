"use strict";function SetSortingOrder(n){var t=localStorage.getItem("SortOrder"),i=localStorage.getItem("OrderbySort");t==n&&i=="ASC"?localStorage.setItem("OrderbySort","DESC"):t==n&&i=="DESC"?localStorage.setItem("OrderbySort","ASC"):(localStorage.setItem("SortOrder",n),localStorage.setItem("OrderbySort","ASC"));getActivityDashboard(1)}function getActivityDashboard(n){var o=$("input[name='dashEPCat']:checked").val(),u=localStorage.getItem("btnValue"),t=localStorage.getItem("Datein"),i=localStorage.getItem("SortOrder"),r=localStorage.getItem("OrderbySort"),s=localStorage.getItem("DueMonth"),h=localStorage.getItem("DueYear"),c=$("#inputSuccess2").val(),f=localStorage.getItem("isScroll"),e;i==null&&(i="Status");r==null&&(r="ASC");u==null&&(u=0);t=t==-1?null:t>0?t:0;e=CRxUrls.home_epsdashboard;$.ajax({url:e+"?page="+n+"&sortOrder="+i+"&OrderbySort="+r+"&categoryId="+o+"&status="+u+"&noofdays="+t+"&duemonth="+s+"&dueyear="+h+"&searchtext="+c+"&isScroll="+f,cache:!1,type:"GET",success:function(n){var e,u;f=="false"&&$("#
").empty();$("#partialContents").append(n);$("#partialContents").fadeIn("fast");localStorage.setItem("isScroll",!1);i=localStorage.getItem("SortOrder");e=localStorage.getItem("btnId");$(".button1").removeClass("active");e!=null?$("#"+e).addClass("active"):$("#btn_all").addClass("active");r=localStorage.getItem("OrderbySort");$("#partialContents").addClass("isData");u=localStorage.getItem("due_within_filter");u!=null||u!=undefined?$("#btn_dueWithin").val("Due within "+u):$("#btn_dueWithin").val("Due within Days");$(".sorting1").removeClass("sorting_asc1").removeClass("sorting_desc1");r=="ASC"?$("#"+i).addClass("sorting_asc1"):$("#"+i).addClass("sorting_desc1");t!=""&&t!="0"&&$("#c_myTable tr td:nth-child(3)").removeClass().addClass("status_due_days")}})}$(document).ready(function(){function n(){var u=t("Isback"),n=localStorage.getItem("tabName"),i,r;u==1&&n!=null?($("li").removeClass("active"),$(".tab-pane").removeClass("active"),i=$("#"+n),r=i.find("a").attr("href"),$(r).addClass("active"),i.addClass("active"),$("#"+n).click()):localStorage.clear()}function t(n){for(var u=window.location.search.substring(1),i,r=u.split("&"),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return i[1];return null}$("#catfilter").show();n();getActivityDashboard(1);$("input[name=dashEPCat]:radio").change(function(){getActivityDashboard(1)});$(".button1").click(function(){$(".button1").removeClass("active");$("#btn_dueWithin").val("Due within Days");$(this).addClass("active")});$("#btn_Inprogress").on("click",function(){localStorage.setItem("btnId","btn_Inprogress");localStorage.setItem("btnValue",2);localStorage.setItem("Datein",0);localStorage.setItem("due_within_filter","Days");getActivityDashboard(1)});$("#btn_pastdue").on("click",function(){localStorage.setItem("btnId","btn_pastdue");localStorage.setItem("btnValue",-1);localStorage.setItem("Datein",0);localStorage.setItem("due_within_filter","Days");getActivityDashboard(1)});$("#btn_all").on("click",function(){localStorage.setItem("btnId","btn_all");localStorage.setItem("btnValue","");localStorage.setItem("Datein",0);localStorage.setItem("due_within_filter","Days");getActivityDashboard(1)});$("#btn_Completed").on("click",function(){localStorage.setItem("btnId","btn_Completed");localStorage.setItem("btnValue",1);localStorage.setItem("Datein",0);localStorage.setItem("due_within_filter","Days");getActivityDashboard(1)});$("a.filter_due_within").on("click",function(n){var t,f,i,r,u;if(localStorage.setItem("btnId","btn_dueWithin"),n.preventDefault(),t=$(this).text(),f=parseInt($(this).text()),localStorage.setItem("due_within_filter",t),$("#btn_dueWithin").val("Due within "+t),t=="This Month"){var e=new Date,r=e.getMonth()+1,u=e.getFullYear();localStorage.setItem("DueMonth",r);localStorage.setItem("DueYear",u);localStorage.setItem("Datein",-1)}else t=="Next Month"?(i=new Date,i.setMonth(1),r=i.getMonth()+1,u=i.getFullYear(),localStorage.setItem("DueMonth",r),localStorage.setItem("DueYear",u),localStorage.setItem("Datein",-1)):(localStorage.setItem("DueMonth",0),localStorage.setItem("DueYear",0),localStorage.setItem("Datein",f));getActivityDashboard(1)});$("#btn_upcoming").on("click",function(){localStorage.setItem("Datein",90);getActivityDashboard(1)});$(window).scroll(function(){if($(window).scrollTop()+$(window).height()>$(document).height()-100){var n=1;localStorage.getItem("PageIndex")!=null&&(n=parseInt(localStorage.getItem("PageIndex")));localStorage.setItem("isScroll",!0);getActivityDashboard(n+1);localStorage.setItem("PageIndex",n+1)}})});$("#defeciencytab").on("click",function(){$(".assetDeficienciesleg").show();localStorage.setItem("tabName","defeciencytab");$("#catfilter").hide();$("#li_tab4").hasClass("active")?($("#tab4").addClass("active"),$("#li_tab4").addClass("active")):$("#li_tab3").hasClass("active")?($("#tab3").addClass("active"),$("#li_tab3").addClass("active"),$("#btn_showall").addClass("active")):($("#li_tab3").addClass("active"),$("#tab3").addClass("active"),$("#btn_showall").addClass("active"))});$("#activitytab").on("click",function(){$(".assetDeficienciesleg").hide();localStorage.setItem("tabName","activitytab");$("#catfilter").show();var n=localStorage.getItem("PageIndex");n=n!=""?n:1;$("#partialContents").hasClass("isData")||getActivityDashboard(n)});$("#inspectionSummarytab").on("click",function(){$(".assetDeficienciesleg").hide();localStorage.setItem("tabName","inspectionSummarytab");$("#catfilter").show();$("#summary").hasClass("isData")||getInspectionSummary()});$("#btntxtsearch").click(function(){getActivityDashboard(1)});$("#closesearch").click(function(){$("#inputSuccess2").val("");c(1)});